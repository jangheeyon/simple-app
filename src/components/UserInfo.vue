<template>
  <div class="container mt-5" style="max-width: 500px;">
    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="card-title mb-4 text-center">íšŒì› ì •ë³´</h3>

        <form @submit.prevent="updateUser">
          <!-- ì•„ì´ë”” -->
          <div class="mb-3">
            <label for="userId" class="form-label">ì•„ì´ë””</label>
            <input
              type="text"
              class="form-control"
              id="userId"
              v-model="user.userId"
              readonly
            >
          </div>

          <!-- ì´ë¦„ -->
          <div class="mb-3">
            <label for="userName" class="form-label">ì´ë¦„</label>
            <input
              type="text"
              class="form-control"
              id="userName"
              v-model="user.userName"
              placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
              required
            >
          </div>

          <!-- ë¹„ë°€ë²ˆí˜¸ -->
          <div class="mb-3">
            <label for="userPassword" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
            <div class="input-group">
              <input
                :type="passwordFieldType"
                class="form-control"
                id="userPassword"
                v-model="user.userPassword"
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                required
              >
              <button
                class="btn btn-outline-secondary"
                type="button"
                @click="togglePassword"
                tabindex="-1"
              >
                ğŸ‘ï¸
              </button>
            </div>
          </div>

          <!-- ê¶Œí•œ -->
          <div class="mb-4">
            <label for="role" class="form-label">ê¶Œí•œ</label>
            <select
              class="form-select"
              id="role"
              v-model="user.role"
              required
            >
              <option value="">ê¶Œí•œ ì„ íƒ</option>
              <option value="ADMIN">ê´€ë¦¬ì</option>
              <option value="USER">ì¼ë°˜</option>
            </select>
          </div>

          <!-- ë²„íŠ¼ ì˜ì—­ -->
          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-outline-secondary" @click="moveToBack">
              ë’¤ë¡œ
            </button>
            <button type="submit" class="btn btn-primary">
              ìˆ˜ì •
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { useRouter, useRoute } from 'vue-router';

const router = useRouter();
const route = useRoute();


// ë”ë¯¸ ìœ ì € ë°ì´í„°
const user = ref({
  userId: 'dummyuser',
  userName: 'í™ê¸¸ë™',
  userPassword: 'password123',
  role: 'USER',
});

const passwordFieldType = ref('password');


onMounted(() => {
  // ë”ë¯¸ ë°ì´í„°ë§Œ ì‚¬ìš©
});


function updateUser() {
  alert("íšŒì› ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤ (ì„ì‹œ)");
  router.push('/userList');
}

function moveToBack() {
  router.push('/userList');
}

function togglePassword() {
  passwordFieldType.value = passwordFieldType.value === 'password' ? 'text' : 'password';
}
</script>